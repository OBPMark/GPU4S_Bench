default:
    tags: ["Board"]
    
board check:
  stage: .pre
  script: /home/gitlab-runner/prepare.sh

compile in source CUDA:
  stage: build
  script: /home/gitlab-runner/build_cuda.sh $CI_PROJECT_DIR

compile in source HIP:
  stage: build
  script: /home/gitlab-runner/build_hip.sh $CI_PROJECT_DIR
 
compile in source OpenCL:
  stage: build
  script: /home/gitlab-runner/build_opencl.sh $CI_PROJECT_DIR
 
compile in source OpenMP:
  stage: build
  script: /home/gitlab-runner/build_openmp.sh $CI_PROJECT_DIR

testing cuda:
  stage: test
  script:  /home/gitlab-runner/test_cuda.sh $CI_JOB_ID $CI_PROJECT_DIR $GITLAB_USER_NAME
  artifacts:
    when: always
    reports:
      junit: report_CUDA.xml
      
testing hip:
  stage: test
  script:  /home/gitlab-runner/test_hip.sh $CI_JOB_ID $CI_PROJECT_DIR $GITLAB_USER_NAME
  artifacts:
    when: always
    reports:
      junit: report_CUDA.xml
      
testing opencl:
  stage: test
  script:  /home/gitlab-runner/test_opencl.sh $CI_JOB_ID $CI_PROJECT_DIR $GITLAB_USER_NAME
  artifacts:
    when: always
    reports:
      junit: report_CUDA.xml
      
testing openmp:
  stage: test
  script:  /home/gitlab-runner/test_openmp.sh $CI_JOB_ID $CI_PROJECT_DIR $GITLAB_USER_NAME
  artifacts:
    when: always
    reports:
      junit: report_CUDA.xml